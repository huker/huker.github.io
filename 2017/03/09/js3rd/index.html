<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>高程3重读(ing...) | 回头看看</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">高程3重读(ing...)</h1><a id="logo" href="/.">回头看看</a><p class="description">keep moving</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/photos/"><i class="fa fa-camera"> photos</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">高程3重读(ing...)</h1><div class="post-meta">Mar 9, 2017</div><div class="post-content"><h2 id="before"><a href="#before" class="headerlink" title="before"></a>before</h2><p>机会来的措手不及，但一番聊天后思考了很多。实习时候用多了jq，现在做毕设也用的框架，并且用框架的时候，也一部分只知道如何用，而没去究其原理，觉得自己一直认为重要的基础却被抛下了。这显得自己的简历中“重视基础”写的冠冕堂皇，于是重读高程3（其实以前没看多少，更喜欢读你不知道的js系列）。</p>
<p>希望这次经历后自己重拾初衷，端正作为一个工程师应有的态度，不能浮躁，毕竟理想是成为一名写一手好代码的人。</p>
<h2 id="生疏点的记录"><a href="#生疏点的记录" class="headerlink" title="生疏点的记录"></a>生疏点的记录</h2><a id="more"></a>
<h3 id="零散"><a href="#零散" class="headerlink" title="零散"></a>零散</h3><ul>
<li>ie10+支持严格模式</li>
</ul>
<h3 id="定义-赋值"><a href="#定义-赋值" class="headerlink" title="定义 赋值"></a>定义 赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//var c = 1; //1，1，1 </span></div><div class="line"><span class="keyword">var</span> a = b = c;</div><div class="line"><span class="built_in">console</span>.log(a,b,c)</div><div class="line"><span class="comment">//a = 1;   // c not defined 这里是赋值把c赋值给前面的 所以未定义</span></div><div class="line"><span class="comment">//var c = 1;   //undefined undefined 1 c预定义了 但是在上方的时候是没赋值 所以undefined</span></div></pre></td></tr></table></figure>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>1.<code>null</code> 的 <code>typeof</code> 是 <code>object</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//判断是否是null</span></div><div class="line"><span class="keyword">var</span> a = <span class="literal">null</span>;</div><div class="line"><span class="keyword">if</span>(!a &amp;&amp; a <span class="keyword">typeof</span> === <span class="string">'object'</span>)&#123;...&#125;</div></pre></td></tr></table></figure>
<p>2.Number类型中八进制，十六进制的表示（严格模式下错误）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num1 = <span class="number">070</span>; <span class="comment">//八进制的56</span></div><div class="line"><span class="keyword">var</span> num2 = <span class="number">0xA</span>; <span class="comment">//十六进制的10</span></div></pre></td></tr></table></figure>
<p>3.js中可以保存正零（＋0）和负零（－0）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num1 = <span class="number">-0</span>;</div><div class="line"><span class="keyword">var</span> num2 = +<span class="number">0</span>;</div><div class="line"><span class="built_in">console</span>.log(num1 === num2); <span class="comment">//true</span></div></pre></td></tr></table></figure>
<p>4.浮点数精度不如整数 0.1+0.2结果不是0.3 是0.30000000000000004，但0.15和0.15就是0.3，所以不要测试浮点数值（IEEE754数值浮点计算的锅）</p>
<p>5.NaN大话题</p>
<ul>
<li>和任何值都不等（包括自身） 可以利用这点在实际开发中做判断</li>
<li>正数／0返回Infinity，负数则－Infinity，0／0才返回NaN</li>
</ul>
<h3 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h3><ol>
<li><p><code>&amp;&amp;</code> 逻辑与，是个短路操作符（||也是短路操作符）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> found = <span class="literal">true</span>;</div><div class="line"><span class="keyword">var</span> result = found &amp;&amp; somevariable; <span class="comment">//直接报错 因为没定义sv</span></div><div class="line"><span class="built_in">console</span>.log(result);</div><div class="line"></div><div class="line"><span class="keyword">var</span> found1 ＝ <span class="literal">false</span>;</div><div class="line"><span class="keyword">var</span> rs1 = found1 &amp;&amp; somevariable;</div><div class="line"><span class="built_in">console</span>.log(rs1);               <span class="comment">//false，不会发生错误</span></div><div class="line"></div><div class="line"><span class="comment">// ||中也相似 如果后面的undefined 前面的是true则不报错 false则报错</span></div></pre></td></tr></table></figure>
</li>
<li><p>~</p>
</li>
</ol>
<h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><h4 id="1-对象"><a href="#1-对象" class="headerlink" title="1.对象"></a>1.对象</h4><h5 id="数据属性"><a href="#数据属性" class="headerlink" title="数据属性"></a>数据属性</h5><p>修改对象数据值属性的特性，使用 <code>Object.defineProperty()</code> 方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.defineProperty(person,<span class="string">"name"</span>,&#123;</div><div class="line">  writable:<span class="literal">true</span>,        <span class="comment">//可写</span></div><div class="line">  value:<span class="string">"huk"</span>,          <span class="comment">//属性的值</span></div><div class="line">  configurable:<span class="literal">true</span>,    <span class="comment">//可配置 改成false后就不能删除 修改这个属性(除了writable可以改成false)</span></div><div class="line">  enumerable:<span class="literal">true</span>       <span class="comment">//可枚举 </span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h5 id="访问器属性"><a href="#访问器属性" class="headerlink" title="访问器属性"></a>访问器属性</h5><p>不包含数据值，包含 <code>getter</code> 和 <code>setter</code> 函数。读取属性的时候调用get，写入属性的时候调用set。</p>
<p>这时设置一个属性会导致别的属性变化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> book = &#123;</div><div class="line">  _year:<span class="number">2004</span>,</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line"><span class="built_in">Object</span>.defineProperty(book,<span class="string">"year"</span>,&#123;</div><div class="line">  get:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._year</div><div class="line">  &#125;,</div><div class="line">  set:<span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>)</span>&#123;...&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h5 id="定义多个属性"><a href="#定义多个属性" class="headerlink" title="定义多个属性"></a>定义多个属性</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.defineProperties(book,&#123;</div><div class="line">  _year:&#123;</div><div class="line">    value:<span class="number">2004</span></div><div class="line">  &#125;,</div><div class="line">  year:&#123;</div><div class="line">    get:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;...&#125;,</div><div class="line">    set:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;...&#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"><span class="comment">//读取属性的特性</span></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(book,<span class="string">'_year'</span>);</div></pre></td></tr></table></figure>
<h5 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h5><ul>
<li><p>工厂模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">    o.name = name;</div><div class="line">    o.age = age;</div><div class="line">    o.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> o;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> per = foo(<span class="string">'huk'</span>,<span class="number">23</span>);</div></pre></td></tr></table></figure>
<p>缺点：没有解决对象识别问题</p>
</li>
<li><p>构造函数模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo2</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.age = age;</div><div class="line">    <span class="keyword">this</span>.sayName = sayName();</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> per1 = <span class="keyword">new</span> Foo2(<span class="string">'huk1'</span>,<span class="number">23</span>);</div><div class="line"><span class="keyword">var</span> per2 = <span class="keyword">new</span> Foo2(<span class="string">'huk2'</span>,<span class="number">22</span>);</div></pre></td></tr></table></figure>
<p>创建Foo2构造函数的实例，需要使用new操作符。per1和per2的constructor属性都指向Foo2，都是Foo2的实例。</p>
<p>缺点：全局作用域中定义的函数实际只给某个对象使用，如果要很多方法，就要定义很多全局下的函数，没有封装的意义。</p>
</li>
<li><p>原型模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo3</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">Foo3.prototype.name = <span class="string">'huk3'</span>;</div><div class="line">Foo3.prototype.age = <span class="number">21</span>;</div><div class="line">Foo3.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> Foo3();</div><div class="line">per.sayName();  <span class="comment">//huk3</span></div><div class="line"><span class="keyword">var</span> per2 = <span class="keyword">new</span> Foo3();</div><div class="line">per2.sayName(); <span class="comment">//huk3</span></div><div class="line"><span class="comment">//per.sayName == per2.sayName true</span></div></pre></td></tr></table></figure>
</li>
<li><p>Foo3原型对象的 <code>constructor</code> 属性 –&gt; Foo3构造函数</p>
</li>
<li><p>创建的实例per和per2的 <code>[[prototype]]</code> 指向Foo3.prototype</p>
<ul>
<li>[[prototype]]无法访问，但可以用 <code>isPrototype()</code> 方法判断是否指向对象的prototype</li>
<li>实例上定义新的属性（和原型同名的属性）会屏蔽原型上的属性， <code>hasOwnProperty()</code> 可以检测是否是实例上定义的值</li>
<li>in操作符 <code>&quot;name&quot; in person</code>,原型和实例上的属性都遍历</li>
<li>Object.keys()：对象上所有可枚举的实例属性</li>
<li>Object.getOwnPropertyNames()：对象上所有可or不可枚举的实例属性</li>
</ul>
<p>缺点：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">Person.prototype = &#123;</div><div class="line">  <span class="comment">//这边prototype重写后，原来的链断了，所以要重新指向person。这时候Person构造函数上其实是有两个prototype对象的，此后定义的实例都指向新的，重写之前的仍指向旧的</span></div><div class="line">  <span class="keyword">constructor</span>:Person, </div><div class="line">  name:'huk',</div><div class="line">  friends:["huk1","huk2"]</div><div class="line">  //....</div><div class="line">&#125;;</div><div class="line">var per1 = new Person();</div><div class="line">var per2 = new Person();</div><div class="line">per1.friends.push('huk3');</div><div class="line">//这时 per1.friends === per2.friends  "huk1,huk2,huk3"</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>原型和构造组合使用</p>
<p>实例的属性通过构造函数定义，共享的属性和方法使用原型定义。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">  <span class="keyword">this</span>.age = age;</div><div class="line">&#125;</div><div class="line">Person.prototype = &#123;</div><div class="line">  <span class="keyword">constructor</span>:Person,</div><div class="line">  sayName: function()&#123;<span class="built_in">console</span>.log(<span class="keyword">this</span>.name)&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>各实例之间的name和age属性互相不干扰</p>
</li>
<li><p>寄生构造函数模式</p>
</li>
</ul>
<h4 id="2-继承"><a href="#2-继承" class="headerlink" title="2.继承"></a>2.继承</h4><h5 id="寄生继承"><a href="#寄生继承" class="headerlink" title="寄生继承"></a>寄生继承</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.eyes = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line">Person.prototype.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'hi'</span>)</div><div class="line">&#125;;</div><div class="line">Person.prototype.born = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.sayHi();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'has born'</span>)</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">girl</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> girl = <span class="keyword">new</span> Person();</div><div class="line">    girl.sex = <span class="string">'girl'</span>;</div><div class="line">    <span class="keyword">var</span> born = girl.born;</div><div class="line">    girl.born = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        born.call(<span class="keyword">this</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'sex is '</span>+<span class="keyword">this</span>.sex);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> girl;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> kid = <span class="keyword">new</span> girl();</div><div class="line">kid.born();<span class="comment">//   hi / has born / sex is girl</span></div></pre></td></tr></table></figure>
<h3 id="Dom"><a href="#Dom" class="headerlink" title="Dom"></a>Dom</h3><ul>
<li>getElementsByClassName()兼容IE9+</li>
<li>querySelector()兼容IE8+</li>
<li>document.achiveElement获取焦点元素,document.hasFocus()得到文档是否获得焦点</li>
<li>data-type在原生中的设置是ele.dataset.type = ‘…’</li>
</ul>
<h4 id="文档模式"><a href="#文档模式" class="headerlink" title="文档模式"></a>文档模式</h4><p>过渡型或框架型HTML声明与过渡型或框架型XHTML声明均可使浏览器进入近似标准模式，同时，html5的DOCTYPE声明和严格型HTML声明以及严格型XHTML声明则会使浏览器进入标准模式。</p>
<p>不写DOCTYPE则进入混杂模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//判断文档模式</span></div><div class="line"><span class="built_in">document</span>.compatMode == <span class="string">"CSS1Compat"</span>?<span class="string">"标准模式"</span>:<span class="string">"混杂模式"</span></div></pre></td></tr></table></figure>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><h5 id="dom事件流"><a href="#dom事件流" class="headerlink" title="dom事件流"></a>dom事件流</h5><p>三个阶段：事件捕获、处于目标阶段、事件冒泡阶段</p>
<p>实际：捕获-&gt;接收到event-&gt;冒泡响应event返回到文档</p>
<blockquote>
<p>ie8及以前版本不支持dom事件流</p>
</blockquote>
<h5 id="dom0级事件处理"><a href="#dom0级事件处理" class="headerlink" title="dom0级事件处理"></a>dom0级事件处理</h5><p>给元素指定事件处理程序属性，给属性设置函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建</span></div><div class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementbById(<span class="string">'btn'</span>);</div><div class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.id);   <span class="comment">//"btn"</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//删除</span></div><div class="line">btn.onclick = <span class="literal">null</span>;</div></pre></td></tr></table></figure>
<h5 id="dom2级事件处理程序"><a href="#dom2级事件处理程序" class="headerlink" title="dom2级事件处理程序"></a>dom2级事件处理程序</h5><p>第三个参数为true的话代表捕获阶段调用事件处理程序，false代表冒泡阶段调用。</p>
<p>如果一个元素上定义多个click事件，从定义的从上至下顺序执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建</span></div><div class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementbById(<span class="string">'btn'</span>);</div><div class="line"><span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="keyword">this</span>.id);&#125;</div><div class="line">btn.addEventListener(<span class="string">'click'</span>,handler,<span class="literal">false</span>);</div><div class="line"><span class="comment">//删除</span></div><div class="line">btn.removeEventListener(<span class="string">'click'</span>,handler,<span class="literal">false</span>);</div></pre></td></tr></table></figure>
<p>删除的时候需要删除完全相同的，所以要定义个函数表达式</p>
<blockquote>
<p>ie8及以下不支持dom2事件处理</p>
</blockquote>
<h5 id="IE事件处理程序"><a href="#IE事件处理程序" class="headerlink" title="IE事件处理程序"></a>IE事件处理程序</h5><p>作用域在全局上，所以 <code>this === window</code> </p>
<p>早起ie只支持事件冒泡，所以事件被添加到冒泡阶段</p>
<p>果一个元素上定义多个click事件，从定义的从下至上的相反顺序执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建</span></div><div class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementbById(<span class="string">'btn'</span>);</div><div class="line"><span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">"ok"</span>)&#125;</div><div class="line">btn.attachEvent(<span class="string">'click'</span>,handler);</div><div class="line"><span class="comment">//删除</span></div><div class="line">btn.detachEvent(<span class="string">'click'</span>,handler);</div></pre></td></tr></table></figure>
<h5 id="dom中的事件对象"><a href="#dom中的事件对象" class="headerlink" title="dom中的事件对象"></a>dom中的事件对象</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//给目标元素指定事件处理程序时(在第二阶段时)</span></div><div class="line">ev.currentTarget === <span class="keyword">this</span>;</div><div class="line">ev.target === <span class="keyword">this</span>;</div></pre></td></tr></table></figure>
<h5 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//同时兼容ie的处理</span></div><div class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> ev = ev || <span class="built_in">window</span>.event;</div><div class="line">  <span class="comment">//阻止默认行为</span></div><div class="line">  <span class="keyword">if</span>(ev.preventDefault)&#123;</div><div class="line">    ev.preventDefault();</div><div class="line">  &#125;<span class="keyword">else</span>&#123;</div><div class="line">    ev.returnValue = <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//阻止冒泡</span></div><div class="line">  <span class="keyword">if</span>(ev.stopPropagation)&#123;</div><div class="line">    ev.stopPropagation();</div><div class="line">  &#125;<span class="keyword">else</span>&#123;</div><div class="line">    ev.cancelBubble = <span class="literal">true</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/js/">js</a></div><div class="post-nav"><a class="pre" href="/2017/03/27/websocket/">websocket</a><a class="next" href="/2017/01/09/mongoose/">mongoose学习记录</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://huker.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/周学习记录/" style="font-size: 15px;">周学习记录</a> <a href="/tags/d3-js/" style="font-size: 15px;">d3.js</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/electron/" style="font-size: 15px;">electron</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/angular/" style="font-size: 15px;">angular</a> <a href="/tags/ionic/" style="font-size: 15px;">ionic</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/mocha/" style="font-size: 15px;">mocha</a> <a href="/tags/mongo/" style="font-size: 15px;">mongo</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/websocket/" style="font-size: 15px;">websocket</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/03/26/webpack-css/">webpack的css配置(模块化、抽离等)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/01/webpack4-guide/">webpack4指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/18/0218weeklearn/">19-02-18周学习记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/20/webpack2019note/">webpack2019笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/10/d3notes/">d3 - 学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/hexoissues/">hexo遇到的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/01/ionic2-QA/">ionic2+开发 持续更新中</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/20/ng2-start/">ng2试水</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/04/angular-interceptor/">angular学习-http</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/24/angualr-form/">angualr表单验证</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/huker" title="GitHub" target="_blank">GitHub</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">回头看看.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>