<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>angular学习阶段总结 | 回头看看</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">angular学习阶段总结</h1><a id="logo" href="/.">回头看看</a><p class="description">keep moving</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">angular学习阶段总结</h1><div class="post-meta">May 26, 2016</div><div class="post-content"><p>angular的学习一直零零碎碎的，只会写基础。决心好好啃一下，把原理弄懂点，深入学一下。把脑子里记得起来的知识点罗列一下，方便回顾。</p>
<h2 id="常用指令ng"><a href="#常用指令ng" class="headerlink" title="常用指令ng"></a>常用指令ng</h2><ul>
<li>ng-app 定义一个app,是angular的入口 定义了一个$rootScope,以此为根节点开始渲染dom</li>
<li>ng-init  初始化,可以初始化多个变量，用逗号分隔，赋值对象数组字符串数组都可以</li>
<li>ng-controller 定义一个控制器,产生了一个$scope</li>
<li>ng-model 绑定$scope上的值到html元素上，实现model和view的双向绑定</li>
<li>ng-repeat 迭代数组，后面加｜可以带上过滤器，比如filter:query，query也是$scope上一个属性，改变query就能过滤筛选迭代的值</li>
<li>ng-class 动态自定义dom的class</li>
<li>ng-bing 绑定一个值，在angualr解析渲染完毕后才把数据显示出来，避免了数据闪跳的现象</li>
<li>ng-click 点击触发的事件</li>
<li>ng-show 布尔值 true是显示 反之隐藏，也可以写条件</li>
<li>ng-hide 和show相反</li>
<li>ng-if 和if的道理一样</li>
<li>ng-include 包含进来公共页面，可以ng-include=”‘header.html’”(里面要加上单引号，不然会认为是个变量，应该是个表达式)</li>
</ul>
<a id="more"></a>
<h2 id="自定义指令directive"><a href="#自定义指令directive" class="headerlink" title="自定义指令directive"></a>自定义指令directive</h2><blockquote>
<p>指令有两种 一种是修改template的，组件式指令替换dom,另一种是装饰性指令，是进行操作的</p>
</blockquote>
<p>restrict：用来限定指令在html中出现的位置 AEMC —&gt; 属性 元素 注释 类</p>
<p>replace:    true的时候会把指令本身替换掉</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">angualr.module(<span class="string">'myApp'</span>).directive(<span class="string">'myModel'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span>&#123;</div><div class="line">       	restrict:<span class="string">'AEMC'</span>,</div><div class="line">      	replace:<span class="literal">true</span>,</div><div class="line">        template:<span class="string">'&lt;div&gt;&lt;/div&gt;'</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>scope：指令中作用域的绑定</p>
<ul>
<li>@ 把当前属性当作字符串传递 也能以取外层scope的值</li>
<li>= 和父scope中的属性双向绑定</li>
<li>&amp; 传递父scope中的函数以供调用</li>
</ul>
<p>link：连接函数，实现dom操作和scope赋值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//html</span></div><div class="line"><span class="comment">//&lt;body class="container" ng-controller="myCtrl"&gt;</span></div><div class="line"><span class="comment">//&lt;input type="text" ng-model="format"&gt;</span></div><div class="line"><span class="comment">//当前时间:&lt;span my-current="format"&gt;&lt;/span&gt;</span></div><div class="line"><span class="comment">//&lt;/body&gt;</span></div><div class="line"><span class="comment">//js</span></div><div class="line">angular.module(<span class="string">'myApp'</span>).directive(<span class="string">'myCurrent'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$interval,dateFilter</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span>&#123;</div><div class="line">            link:<span class="function"><span class="keyword">function</span> (<span class="params">scope,element,attrs</span>) </span>&#123;</div><div class="line">                <span class="function"><span class="keyword">function</span> <span class="title">getdate</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                    element.html(dateFilter(<span class="keyword">new</span> <span class="built_in">Date</span>(),scope[attrs[<span class="string">'myCurrent'</span>]]))</div><div class="line">                &#125;</div><div class="line">                $interval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                    getdate();</div><div class="line">                &#125;,<span class="number">1000</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<p>controller是link中的第四个参数，要先require进来，require的指令前缀有四种：</p>
<ul>
<li>? 指令同级下查找，找不到赋予null</li>
<li>^ 同级和上级中查找，找不到报错</li>
<li>^? 同级和上级中查找，找不到赋予null</li>
<li>无前缀 同级下查找，找不到报错</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//html</span></div><div class="line"><span class="comment">//&lt;girl kind="beautiful,clever"&gt;&lt;/girl&gt;</span></div><div class="line"><span class="comment">//js</span></div><div class="line">angular.module(<span class="string">'myApp'</span>).directive(<span class="string">'girl'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span>&#123;</div><div class="line">            restrict:<span class="string">'E'</span>,</div><div class="line">            scope:<span class="literal">true</span>,</div><div class="line">            <span class="comment">//控制器里的是依赖注入进来的 是写死的$...</span></div><div class="line">            <span class="comment">//link是用来将指令隔离开的,而controller是提供复用的行为的(给别的指令调用的)</span></div><div class="line">            <span class="comment">// 比如这边的话就是girl的属性要给smart和beautiful来修改</span></div><div class="line">            controller:<span class="function"><span class="keyword">function</span> (<span class="params">$scope, $element, $attrs</span>) </span>&#123;</div><div class="line">                $scope.kinds = [];</div><div class="line">                <span class="keyword">this</span>.add = <span class="function"><span class="keyword">function</span> (<span class="params">ele</span>) </span>&#123;</div><div class="line">                    $scope.kinds.push(ele)</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">            template:<span class="string">'&lt;h1&gt;hi&lt;/h1&gt;&#123;&#123;kinds&#125;&#125;'</span>,</div><div class="line">            <span class="comment">//link里的是形参 可以随便写</span></div><div class="line">            link:<span class="function"><span class="keyword">function</span> (<span class="params">scope,element,attrs</span>) </span>&#123;</div><div class="line">                element.bind(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                    alert(scope.kinds);</div><div class="line">                &#125;)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">    <span class="comment">//上面在controller里面定义的就可以在link的第四个参数里面调用这个控制器(要先require进来)</span></div><div class="line">    angular.module(<span class="string">'myApp'</span>).directive(<span class="string">'kind'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span>&#123;</div><div class="line">            <span class="built_in">require</span>:<span class="string">'girl'</span>,</div><div class="line">            link:<span class="function"><span class="keyword">function</span> (<span class="params">scope, element, attrs, girlCtrl</span>) </span>&#123;</div><div class="line">                girlCtrl.add(attrs.kind)</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<p>transclude，描述是否嵌入指令内部的dom。指令中的transclude属性有三种值，true、false、object，object是定义多个嵌入点的的。</p>
<p>下面的例子中，页面渲染后ng-transclude中的是<code>&lt;div&gt;这是原来的内容&lt;/div&gt;</code> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//html部分</span></div><div class="line"><span class="comment">//&lt;my-student&gt;</span></div><div class="line"><span class="comment">//    &lt;div&gt;这是原来的内容&lt;/div&gt;</span></div><div class="line"><span class="comment">//&lt;/my-student&gt;</span></div><div class="line"><span class="comment">//js</span></div><div class="line">angular.module(<span class="string">'myApp'</span>).directive(<span class="string">'myStudent'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span>&#123;</div><div class="line">        transclude:<span class="literal">true</span>,</div><div class="line">        replace:<span class="literal">true</span>,</div><div class="line">        template:<span class="string">'&lt;div&gt;我是template&lt;ng-transclude&gt;&lt;/ng-transclude&gt;&lt;/div&gt;'</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="注意点："><a href="#注意点：" class="headerlink" title="注意点："></a>注意点：</h3><ul>
<li>在html用指令的时候，要讲单词用-分开，并且首字母小写,例如 <code>my-model</code></li>
<li>而在定义的时候要遵循驼峰命名法，例如 <code>myModel</code> </li>
<li>directive中的scope是参数，$加不加无所谓的</li>
<li><code>scope,element,attrs</code> 分别是作用域、当前dom的jq对象（内置jqlite）、属性的对象（集合）</li>
</ul>
<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><blockquote>
<p>angular里内置的服务都是以$开头的</p>
</blockquote>
<h3 id="http"><a href="#http" class="headerlink" title="$http"></a>$http</h3><blockquote>
<p>封装了jq的$ajax对象,get post delete</p>
</blockquote>
<h3 id="timeout"><a href="#timeout" class="headerlink" title="$timeout"></a>$timeout</h3><blockquote>
<p>延时器的封装，在控制器注入服务，用法和原生几乎相同</p>
</blockquote>
<h3 id="provider"><a href="#provider" class="headerlink" title="provider"></a>provider</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">angualr.module(<span class="string">'myApp'</span>).provider(<span class="string">'myService'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.$get = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="string">'+'</span>:<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123; <span class="keyword">return</span> a+b &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>自定义服务有封装好的factory servive value constant，都是通过provider封装的</p>
<p>provider定义的服务，注入到控制器中，等于new一个实例，返回的是return中的内容，可以直接调用其中的方法，myService[‘+’] 、myService.add这样。</p>
<p>对服务进行配置的时候，config配置此服务返回的是整个myService。</p>
<blockquote>
<p>用factory定义服务</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">angualr.module(<span class="string">'myApp'</span>).factory(<span class="string">'myService'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$http</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span>&#123;</div><div class="line">        add:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> $http.get(<span class="string">'/url'</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>返回一个对象 <code>myService</code>，以供别的组件来注入，然后调用对象里面定义的各种方法。模块化的开发，便于复用。</p>
<blockquote>
<p>用service定义服务</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">angualr.module(<span class="string">'myApp'</span>).service(<span class="string">'myService'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$http</span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.add = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> $http.get(<span class="string">'/url'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>注入的时候等于在实例化服务，调用对象的方法</p>
<blockquote>
<p>value constant服务</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//value</span></div><div class="line">angualr.module(<span class="string">'myApp'</span>).value(<span class="string">'person'</span>,&#123;name:<span class="string">'huk'</span>&#125;)</div><div class="line"><span class="comment">//constant</span></div><div class="line">angualr.module(<span class="string">'myApp'</span>).constant(<span class="string">'person'</span>,&#123;name:<span class="string">'huk'</span>&#125;)</div></pre></td></tr></table></figure>
<h2 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h2><blockquote>
<p>scope是一个上下文对象，是双向数据绑定和mvc的基础</p>
</blockquote>
<h3 id="3个scope"><a href="#3个scope" class="headerlink" title="3个scope"></a>3个scope</h3><ul>
<li>全局 $rootScope，在指定ng-app的时候就产生</li>
<li>控制器 $scope，在指定ng-controller的时候产生</li>
<li>自定义指令 scope，是自定义指令定义的第一个参数</li>
</ul>
<h3 id="scope内置属性"><a href="#scope内置属性" class="headerlink" title="scope内置属性"></a>scope内置属性</h3><ul>
<li>console.log一下$scope，没有绑定属性的$scope也不是空的，原型链上有很多属性</li>
<li>$开头的属性是可以调用的，$$开头的是禁止调用的是私有属性</li>
</ul>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><blockquote>
<p>创建 -&gt; 注册监控者 -&gt; 模型变化 -&gt; 检测变化 -&gt; 销毁</p>
</blockquote>
<ul>
<li>在定义控制器的时候创建</li>
<li>注册监听 <code>$watch</code></li>
<li>销毁监听 <code>$destory</code></li>
</ul>
<h3 id="watch-apply"><a href="#watch-apply" class="headerlink" title="$watch,$apply"></a>$watch,$apply</h3><blockquote>
<p>注册监听，注册就添加一个$$watcher(观察者)，$apply强行进行脏值检查。</p>
</blockquote>
</div><div class="tags"><a href="/tags/angular/">angular</a></div><div class="post-nav"><a class="pre" href="/2016/06/17/git/">Git操作</a><a class="next" href="/2016/05/10/blog和todolist总结/">nodeblog总结</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://huker.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/ionic/" style="font-size: 15px;">ionic</a> <a href="/tags/angular/" style="font-size: 15px;">angular</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/d3-js/" style="font-size: 15px;">d3.js</a> <a href="/tags/electron/" style="font-size: 15px;">electron</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/mocha/" style="font-size: 15px;">mocha</a> <a href="/tags/mongo/" style="font-size: 15px;">mongo</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/websocket/" style="font-size: 15px;">websocket</a> <a href="/tags/知识点/" style="font-size: 15px;">知识点</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/02/10/d3notes/">d3 - 学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/hexoissues/">hexo遇到的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/01/ionic2-QA/">ionic2+开发 持续更新中</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/20/ng2-start/">ng2试水</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/04/angular-interceptor/">angular学习-http</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/24/angualr-form/">angualr表单验证</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/27/websocket/">websocket</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/09/js3rd/">高程3重读(ing...)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/mongoose/">mongoose学习记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/working-solve/">实习期间碰到的一些知识点</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/huker" title="GitHub" target="_blank">GitHub</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">回头看看.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>